#
# BasaltOS â€“ ESP32 platform defaults
# Applied before board-specific sdkconfig.defaults
#

# -------------------------------------------------
# Core system
# -------------------------------------------------
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y
CONFIG_ESP32_DEFAULT_CPU_FREQ_MHZ=240

CONFIG_ESP_SYSTEM_PANIC_PRINT_REBOOT=y
CONFIG_ESP_SYSTEM_PANIC_REBOOT_DELAY_SECONDS=5

# -------------------------------------------------
# Console / UART
# -------------------------------------------------
CONFIG_ESP_CONSOLE_UART_DEFAULT=y
CONFIG_ESP_CONSOLE_UART_NUM=0
CONFIG_ESP_CONSOLE_UART_BAUDRATE=115200

CONFIG_LOG_DEFAULT_LEVEL_INFO=y
CONFIG_LOG_DEFAULT_LEVEL=3

CONFIG_LOG_TIMESTAMP_SOURCE_RTOS=y

# -------------------------------------------------
# FreeRTOS
# -------------------------------------------------
CONFIG_FREERTOS_HZ=1000
CONFIG_FREERTOS_ASSERT_ON_UNTESTED_FUNCTION=y

CONFIG_FREERTOS_USE_TRACE_FACILITY=n
CONFIG_FREERTOS_GENERATE_RUN_TIME_STATS=n

# -------------------------------------------------
# SPI
# -------------------------------------------------
CONFIG_SPI_MASTER_IN_IRAM=n
CONFIG_SPI_SLAVE_IN_IRAM=n

# -------------------------------------------------
# SPIFFS (filesystem baseline)
# (Actual enable/disable is handled by Basalt modules)
# -------------------------------------------------
CONFIG_SPIFFS_USE_MAGIC=y
CONFIG_SPIFFS_USE_MAGIC_LENGTH=y
CONFIG_SPIFFS_META_LENGTH=4
CONFIG_SPIFFS_CACHE=y

# -------------------------------------------------
# Heap / memory
# -------------------------------------------------
CONFIG_HEAP_POISONING_DISABLED=y
CONFIG_HEAP_TRACING_OFF=y

CONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM=6
CONFIG_ESP32_WIFI_DYNAMIC_RX_BUFFER_NUM=6

# -------------------------------------------------
# LWIP / Networking (kept minimal for now)
# -------------------------------------------------
CONFIG_LWIP_MAX_ACTIVE_TCP=8
CONFIG_LWIP_MAX_LISTENING_TCP=8
CONFIG_LWIP_MAX_UDP_PCBS=8

CONFIG_LWIP_TCP_KEEPALIVE=y

# -------------------------------------------------
# Watchdog (safe defaults)
# -------------------------------------------------
CONFIG_ESP_TASK_WDT=y
CONFIG_ESP_TASK_WDT_TIMEOUT_S=5
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU0=y
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU1=y

# -------------------------------------------------
# Debug / diagnostics
# -------------------------------------------------
CONFIG_ESP_COREDUMP_ENABLE_TO_FLASH=n
CONFIG_ESP_COREDUMP_ENABLE_TO_UART=n

# -------------------------------------------------
# Power management
# -------------------------------------------------
CONFIG_PM_ENABLE=n
